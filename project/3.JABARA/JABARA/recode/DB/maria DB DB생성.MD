ÌÅ¥Î¶≠ Ïãú Ïù¥Îèô üíé

[TOC]

# maria DB . DBÏÉùÏÑ±

1. docker Ïã§Ìñâ ÌõÑ CLI Ï†ëÏÜç

2. CLI Î™ÖÎ†πÏñ¥ ÏûÖÎ†•

   ```
   1) console Ï†ëÏÜç
   mysql -u(username) -p(pw) 
     -> mysql -uroot -proot
   2)  Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏÉùÏÑ±
   create database ssafy;
   
   ```

3. DBeaver ÏóêÏÑú Ïò§Î•∏Ï™Ω Î≤ÑÌäº ÌÅ¥Î¶≠ ->create -> mariadb -> Database: ssafy & pwÏûÖÎ†• -> ÏôÑÎ£å

4.  SQL Ìé∏ÏßëÍ∏∞ ÏóêÏÑú SQL ÏûëÏÑ±

   ```
   CREATE TABLE USER
   (
       USER_ID        VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
       USER_PW        VARCHAR(45)    NOT NULL    COMMENT 'USER_PW', 
       USER_NAME      VARCHAR(45)    NOT NULL    COMMENT 'USER_NAME', 
       USER_NICKNAME  VARCHAR(45)    NULL        COMMENT 'USER_NICKNAME', 
       USER_EMAIL     VARCHAR(45)    NULL        COMMENT 'USER_EMAIL', 
       USER_GITURL    VARCHAR(45)    NULL        COMMENT 'USER_GITURL', 
       PRIMARY KEY (USER_ID)
   );
   
   select * from USER;
   ```

   

   

# mariaDB. ROOT ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω

1. CLI Î™ÖÎ†πÏñ¥ console Ï†ëÏÜç ÌõÑ
2. use mysql;
3. set password for <u>root</u>=password('<u>ssafy</u>');



# TABLE ÏÉùÏÑ± SQL

```sql
-- select ÏøºÎ¶¨Îì§
select * from `USER`;
select * from POST;
select * from POST_COMMENT;
select * from TAG order by TAG_NUMBER ;
select * from POST_TAG;
select * from ALGO_CATEGORY;
select * from HIRE_INFOMATION;
select * from RESUME;
select * from RESUME_DETAIL;
select * from MY_APPLY;
select * from MY_CAL;
select * from HIRE_INFORMATION;

-- drop table ÏøºÎ¶¨Îì§
drop table POST;
drop table POST_COMMENT;
drop table TAG;
drop table POST_TAG;
drop table ALGO_CATEGORY ;
drop table RESUME;
drop table RESUME_DETAIL ;
drop table HIRE_INFOMATION ;
drop table MY_APPLY ;
drop table MY_CAL;
drop table MY_HIRE_SAVE;
drop table ALGO_CATEGORY_COUNT ;
drop table LICENSE;
drop table IMAGE;
drop table Chat;
drop table `EXP`;
drop table `USER`;
drop table MY_CAL;
drop table HIRE_INFORMATION;

CREATE TABLE USER
(
    `USER_ID`        VARCHAR(45)     NOT NULL    COMMENT 'USER_ID', 
    `USER_PW`        VARCHAR(45)     NOT NULL    COMMENT 'USER_PW', 
    `USER_NAME`      VARCHAR(45)     NOT NULL    COMMENT 'USER_NAME', 
    `USER_NICKNAME`  VARCHAR(45)     NULL        COMMENT 'USER_NICKNAME', 
    `USER_EMAIL`     VARCHAR(45)     NULL        COMMENT 'USER_EMAIL', 
    `USER_GITURL`    VARCHAR(45)     NULL        COMMENT 'USER_GITURL', 
    `USER_IMAGE`     VARCHAR(300)    NULL        COMMENT 'USER_IMAGE', 
    `USER_AUTHO`     VARCHAR(45)     NULL        COMMENT 'USER_AUTHO', 
    PRIMARY KEY (USER_ID)
);

-- POST_NUMBER : 1Ïî© ÏûêÎèô Ï¶ùÍ∞Ä
-- POST_DATE : ÎãπÏùº ÎÇ†Ïßú ÏûêÎèô ÏûÖÎ†•
-- üëÄ POSTÏùò USER_IDÎäî USER ÌÖåÏù¥Î∏îÏóê ÏûàÏñ¥Ïïº Ìï®
CREATE TABLE POST
(
    POST_NUMBER        INT            NOT NULL    AUTO_INCREMENT COMMENT 'POST_NUMBER', 
    USER_ID            VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    POST_ALGO_TITLE     VARCHAR(100)     NULL        DEFAULT '',
    POST_SNS_CONTENT   TEXT(20000)    NULL           DEFAULT '' COMMENT 'POST_SNS_CONTENT', 
    POST_CODE_CONTENT  TEXT(10000)    NULL           DEFAULT '' COMMENT 'POST_CODE_CONTENT', 
    POST_LIKE          int            NOT NULL       DEFAULT 0  COMMENT 'POST_LIKE',
    POST_COMMENT_COUNT int             NOT NULL     DEFAULT 0 ,
    IS_SOLVED          int             NULL         DEFAULT 0,
    POST_CATEGORY      VARCHAR(45)    NOT NULL   DEFAULT 'SNS' COMMENT 'POST_CATEGORY',
    POST_DATE DATETIME NOT NULL DEFAULT NOW(),
    PRIMARY KEY (POST_NUMBER)
);

ALTER TABLE POST
    ADD CONSTRAINT FK_POST_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE CASCADE ON UPDATE RESTRICT;
       
CREATE TABLE POST_COMMENT
(
    `POST_NUMBER`      INT            NOT NULL    COMMENT 'POST_NUMBER', 
    `COMMENT_NUMBER`   INT            NOT NULL	DEFAULT 0  COMMENT 'COMMENT_NUMBER', 
    `COMMENT_CONTENT`  VARCHAR(100)    NOT NULL    COMMENT 'COMMENT_CONTENT', 
    `USER_ID`          VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    `COMMENT_DATE`     DATETIME           NOT NULL  DEFAULT NOW()  COMMENT 'COMMENT_DATE', 
    `TARGETUSER_ID`    VARCHAR(45)     NULL        COMMENT 'TARGETUSER_ID', 
    PRIMARY KEY (POST_NUMBER, COMMENT_NUMBER)
);

ALTER TABLE POST_COMMENT
    ADD CONSTRAINT FK_POST_COMMENT_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE CASCADE ON UPDATE RESTRICT;

ALTER TABLE POST_COMMENT
    ADD CONSTRAINT FK_POST_COMMENT_POST_NUMBER_POST_POST_NUMBER FOREIGN KEY (POST_NUMBER)
        REFERENCES POST (POST_NUMBER) ON DELETE CASCADE ON UPDATE RESTRICT;
  

CREATE TABLE TAG
(
    `TAG_NUMBER`  INT            NOT NULL    AUTO_INCREMENT COMMENT 'TAG_NUMBER', 
    `TAG_NAME`    VARCHAR(45)    NOT NULL    UNIQUE COMMENT 'TAG_NAME' , 
    PRIMARY KEY (TAG_NUMBER)
);

CREATE TABLE POST_TAG
(
    `POST_NUMBER`  INT    NOT NULL    COMMENT 'POST_NUMBER', 
    `TAG_NUMBER`   INT    NOT NULL    UNIQUE COMMENT 'TAG_NUMBER' 
);
ALTER TABLE POST_TAG
    ADD CONSTRAINT FK_POST_TAG_POST_NUMBER_POST_POST_NUMBER FOREIGN KEY (POST_NUMBER)
        REFERENCES POST (POST_NUMBER) ON DELETE CASCADE ON UPDATE RESTRICT;

ALTER TABLE POST_TAG
    ADD CONSTRAINT FK_POST_TAG_TAG_NUMBER_TAG_TAG_NUMBER FOREIGN KEY (TAG_NUMBER)
        REFERENCES TAG (TAG_NUMBER) ON DELETE CASCADE ON UPDATE RESTRICT;


  CREATE TABLE ALGO_CATEGORY
  (
  		`POST_NUMBER`   INT            NOT NULL    COMMENT 'POST_NUMBER',
  		`CATEGORY` VARCHAR(45)		NOT NULL,
  		PRIMARY KEY (POST_NUMBER, CATEGORY)
  )

ALTER TABLE ALGO_CATEGORY
    ADD CONSTRAINT FK_ALGO_CATEGORY_POST_NUMBER_POST_POST_NUMBER FOREIGN KEY (POST_NUMBER)
        REFERENCES POST (POST_NUMBER) ON DELETE CASCADE ON UPDATE RESTRICT;
        
create Table Chat(
	`USER_ID` VARCHAR(45) NOT NULL,
	`CHAT` VARCHAR(100) NOT NULL
)

CREATE TABLE ALGO_CATEGORY_COUNT
(
    `USER_ID`       VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    `HASH`          INT            NULL        DEFAULT 0	COMMENT 'HASH', 
    `STACK_QUEUE`   INT            NULL        DEFAULT 0	COMMENT 'STACK_QUEUE', 
    `HEAP`          INT            NULL        DEFAULT 0	COMMENT 'HEAP', 
    `SORT`          INT            NULL        DEFAULT 0	COMMENT 'SORT', 
    `BROUTE_FORCE`  INT            NULL        DEFAULT 0	COMMENT 'BROUTE_FORCE', 
    `GREEDY`        INT            NULL        DEFAULT 0	COMMENT 'GREEDY', 
    `DYNAMIC`       INT            NULL        DEFAULT 0	COMMENT 'DYNAMIC', 
    `DFS_BFS`       INT            NULL        DEFAULT 0	COMMENT 'DFS_BFS', 
    `BINARY`        INT            NULL        DEFAULT 0	COMMENT 'BINARY', 
    `GRAPH`         INT            NULL        DEFAULT 0	COMMENT 'GRAPH', 
    `SIMULATION`    INT            NULL        DEFAULT 0	COMMENT 'SIMULATION', 
    `ETC`           INT            NULL        DEFAULT 0	COMMENT 'ETC', 
    PRIMARY KEY (USER_ID)
);

ALTER TABLE ALGO_CATEGORY_COUNT
    ADD CONSTRAINT FK_ALGO_CATEGORY_COUNT_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;
       
CREATE TABLE HIRE_INFORMATION
(
    `HIRE_NUMBER`  	INT            NOT NULL    AUTO_INCREMENT COMMENT 'HIRE_NUMBER', 
    `COMPANY_NAME`    VARCHAR(45)    NOT NULL    COMMENT 'COMPANY_NAME', 
    `START_DATE`      DATETIME       NULL    	COMMENT 'START_DATE', 
    `END_DATE`        DATETIME       NULL    	COMMENT 'END_DATE', 
    `COMPANY_URL`     VARCHAR(80)    NULL        COMMENT 'COMPANY_URL', 
    `COMPANY_IMAGE`   VARCHAR(80)    NULL        COMMENT 'COMPANY_IMAGE', 
    PRIMARY KEY (HIRE_NUMBER)
);

CREATE TABLE MY_APPLY
(
    `USER_ID`      VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    `HIRE_NUMBER`  INT            NOT NULL    COMMENT 'HIRE_NUMBER', 
    PRIMARY KEY (USER_ID, HIRE_NUMBER)
);

ALTER TABLE MY_APPLY
    ADD CONSTRAINT FK_MY_APPLY_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE MY_APPLY
    ADD CONSTRAINT FK_MY_APPLY_HIRE_NUMBER_HIRE_INFOMATION_HIRE_NUMBER FOREIGN KEY (HIRE_NUMBER)
        REFERENCES HIRE_INFORMATION (HIRE_NUMBER) ON DELETE RESTRICT ON UPDATE RESTRICT;
        

CREATE TABLE RESUME
(
    `USER_ID`        VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    `RESUME_NUMBER`  INT            NOT NULL    AUTO_INCREMENT COMMENT 'RESUME_NUMBER', 
    `COMPANY_NAME`   VARCHAR(45)    NOT NULL    COMMENT 'COMPANY_NAME', 
    `RESUME_PASS`    VARCHAR(20)    NULL        COMMENT 'RESUME_PASS', 
    `RESUME_DATE`    DATE           NOT NULL    DEFAULT NOW() COMMENT 'RESUME_DATE', 
    PRIMARY KEY (RESUME_NUMBER)
);

ALTER TABLE RESUME
    ADD CONSTRAINT FK_RESUME_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE CASCADE ON UPDATE RESTRICT;
        
       
CREATE TABLE RESUME_DETAIL
(
    `RESUME_NUMBER`    INT            NOT NULL    COMMENT 'RESUME_NUMBER', 
    `QUESTION_NUMBER`  INT            NOT NULL    COMMENT 'QUESTION_NUMBER', 
    `RESUME_Q`         VARCHAR(45)    NOT NULL    COMMENT 'RESUME_Q', 
    `RESUME_A`         VARCHAR(45)    NOT NULL    COMMENT 'RESUME_A', 
    PRIMARY KEY (RESUME_NUMBER, QUESTION_NUMBER)
);

ALTER TABLE RESUME_DETAIL
    ADD CONSTRAINT FK_RESUME_DETAIL_RESUME_NUMBER_RESUME_RESUME_NUMBER FOREIGN KEY (RESUME_NUMBER)
        REFERENCES RESUME (RESUME_NUMBER) ON DELETE CASCADE ON UPDATE RESTRICT;
CREATE TABLE IMAGE
(
    `IMAGE_NUMBER`  INT            NOT NULL    AUTO_INCREMENT COMMENT 'IMAGE_NUMBER', 
    `POST_NUMBER`   INT            NOT NULL    COMMENT 'POST_NUMBER', 
    `IMAGE_PATH`    VARCHAR(45)    NOT NULL    COMMENT 'IMAGE_PATH', 
    PRIMARY KEY (IMAGE_NUMBER, POST_NUMBER)
);

ALTER TABLE IMAGE
    ADD CONSTRAINT FK_IMAGE_POST_NUMBER_POST_POST_NUMBER FOREIGN KEY (POST_NUMBER)
        REFERENCES POST (POST_NUMBER) ON DELETE RESTRICT ON UPDATE RESTRICT;
       
CREATE TABLE EXP
(
    `EXP_NUMBER`   INT            NOT NULL    COMMENT 'EXP_NUMBER', 
    `EXP_DATE`     VARCHAR(45)    NULL        COMMENT 'EXP_DATE', 
    `EXP_WORKING`  VARCHAR(45)    NULL        COMMENT 'EXP_WORKING', 
    `EXP_SUBJECT`  VARCHAR(45)    NULL        COMMENT 'EXP_SUBJECT', 
    `EXP_ROLE`     VARCHAR(45)    NULL        COMMENT 'EXP_ROLE', 
    `EXP_CONTENT`  VARCHAR(45)    NULL        COMMENT 'EXP_CONTENT', 
    `EXP_SOLVE`    VARCHAR(45)    NULL        COMMENT 'EXP_SOLVE', 
    `EXP_LEARN`    VARCHAR(45)    NULL        COMMENT 'EXP_LEARN', 
    `EXP_ETC`      VARCHAR(45)    NULL        COMMENT 'EXP_ETC', 
    `USER_ID`      VARCHAR(45)    NULL        COMMENT 'USER_ID', 
    PRIMARY KEY (EXP_NUMBER, USER_ID)
);

ALTER TABLE EXP
    ADD CONSTRAINT FK_EXP_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;
       
CREATE TABLE LICENSE
(
    `LICENSE_NAME`    VARCHAR(45)    NOT NULL    COMMENT 'LICENSE_NAME', 
    `LICENSE_NUMBER`  INT            NULL        COMMENT 'LICENSE_NUMBER', 
    `LICENSE_DATE`    VARCHAR(45)    NULL        COMMENT 'LICENSE_DATE', 
    `LICENSE_INST`    VARCHAR(45)    NULL        COMMENT 'LICENSE_INST', 
    `LICENSE_SCORE`   VARCHAR(45)    NULL        COMMENT 'LICENSE_SCORE', 
    `LICENSE_ETC`     VARCHAR(45)    NULL        COMMENT 'LICENSE_ETC', 
    `USER_ID`         VARCHAR(45)    NULL        COMMENT 'USER_ID', 
    PRIMARY KEY (LICENSE_NUMBER, USER_ID)
);

ALTER TABLE LICENSE
    ADD CONSTRAINT FK_LICENSE_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;
       

  
CREATE TABLE MY_CAL
(
    `CAL_NUMBER`   INT            NOT NULL    AUTO_INCREMENT COMMENT 'CAL_NUMBER', 
    `USER_ID`      VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    `START_DATE`   DATETIME       NULL        COMMENT 'START_DATE', 
    `END_DATE`     DATETIME       NULL        COMMENT 'END_DATE', 
    `CAL_TITLE`    VARCHAR(45)    NOT NULL    COMMENT 'CAL_TITLE', 
    `CAL_CONTENT`  VARCHAR(45)    NULL        COMMENT 'CAL_CONTENT', 
    `HIRE_NUMBER`  VARCHAR(45)    NULL        COMMENT 'HIRE_NUMBER', 
    PRIMARY KEY (CAL_NUMBER)
);

ALTER TABLE MY_CAL
    ADD CONSTRAINT FK_MY_CAL_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;
```

# SAMPLE DATA

```
-- ÏÇ¨Ïö©Ïûê
insert into `USER` values('sinhye','0000','Ïã†Ìòú','ÏãúÎÑ§Ïß±','blog16@naver.com','blog16@naver.com','','admin');
-- Ï±ÑÏö©Ï†ïÎ≥¥
insert into HIRE_INFORMATION(COMPANY_NAME, COMPANY_URL, COMPANY_IMAGE) values('SAMSUNG','string','string');
-- ÎÇòÏùò Ï∫òÎ¶∞Îçî
insert into MY_CAL(USER_ID, START_DATE, END_DATE, CAL_TITLE, CAL_CONTENT ) values('sinhye','2020-03-03','2020-05-05','Î£®Î£® Î∞úÌÜ±ÍπéÍ∏∞', 'Î£®Î£® Î∞úÌÜ±');
```

