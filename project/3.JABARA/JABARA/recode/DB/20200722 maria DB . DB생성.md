ÌÅ¥Î¶≠ Ïãú Ïù¥ÎèôüëÄ

[TOC]

# maria DB . DBÏÉùÏÑ±

1. docker Ïã§Ìñâ ÌõÑ CLI Ï†ëÏÜç

2. CLI Î™ÖÎ†πÏñ¥ ÏûÖÎ†•

   ```
   1) console Ï†ëÏÜç
   mysql -u(username) -p(pw) 
     -> mysql -uroot -proot
   2)  Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ ÏÉùÏÑ±
   create database ssafy;
   
   ```

3. DBeaver ÏóêÏÑú Ïò§Î•∏Ï™Ω Î≤ÑÌäº ÌÅ¥Î¶≠ ->create -> mariadb -> Database: ssafy & pwÏûÖÎ†• -> ÏôÑÎ£å

4.  SQL Ìé∏ÏßëÍ∏∞ ÏóêÏÑú SQL ÏûëÏÑ±

   ```
   CREATE TABLE USER
   (
       USER_ID        VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
       USER_PW        VARCHAR(45)    NOT NULL    COMMENT 'USER_PW', 
       USER_NAME      VARCHAR(45)    NOT NULL    COMMENT 'USER_NAME', 
       USER_NICKNAME  VARCHAR(45)    NULL        COMMENT 'USER_NICKNAME', 
       USER_EMAIL     VARCHAR(45)    NULL        COMMENT 'USER_EMAIL', 
       USER_GITURL    VARCHAR(45)    NULL        COMMENT 'USER_GITURL', 
       PRIMARY KEY (USER_ID)
   );
   
   select * from USER;
   ```

   

   

# mariaDB. ROOT ÎπÑÎ∞ÄÎ≤àÌò∏ Î≥ÄÍ≤Ω

1. CLI Î™ÖÎ†πÏñ¥ console Ï†ëÏÜç ÌõÑ
2. use mysql;
3. set password for <u>root</u>=password('<u>ssafy</u>');



# TABLE ÏÉùÏÑ± SQL

```sql
-- select ÏøºÎ¶¨Îì§
select * from `USER`;
select * from POST;
select * from POST_COMMENT;
select * from TAG order by TAG_NUMBER ;
select * from POST_TAG;
select * from ALGO_CATEGORY;

-- drop table ÏøºÎ¶¨Îì§
drop table POST;
drop table POST_COMMENT;
drop table TAG;
drop table POST_TAG;
drop table ALGO_CATEGORY ;

CREATE TABLE USER
(
    `USER_ID`        VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    `USER_PW`        VARCHAR(45)    NOT NULL    COMMENT 'USER_PW', 
    `USER_NAME`      VARCHAR(45)    NOT NULL    COMMENT 'USER_NAME', 
    `USER_NICKNAME`  VARCHAR(45)    NULL        COMMENT 'USER_NICKNAME', 
    `USER_EMAIL`     VARCHAR(45)    NULL        COMMENT 'USER_EMAIL', 
    `USER_GITURL`    VARCHAR(45)    NULL        COMMENT 'USER_GITURL', 
    PRIMARY KEY (USER_ID)
);

-- POST_NUMBER : 1Ïî© ÏûêÎèô Ï¶ùÍ∞Ä
-- POST_DATE : ÎãπÏùº ÎÇ†Ïßú ÏûêÎèô ÏûÖÎ†•
-- üëÄ POSTÏùò USER_IDÎäî USER ÌÖåÏù¥Î∏îÏóê ÏûàÏñ¥Ïïº Ìï®
CREATE TABLE POST
(
    `POST_NUMBER`        INT            NOT NULL    AUTO_INCREMENT COMMENT 'POST_NUMBER', 
    `USER_ID`            VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    `POST_SNS_CONTENT`   VARCHAR(45)    NULL       	DEFAULT '' COMMENT 'POST_SNS_CONTENT', 
    `POST_CODE_CONTENT`  VARCHAR(45)    NULL       	DEFAULT '' COMMENT 'POST_CODE_CONTENT', 
    `POST_LIKE`          int            NOT NULL   	DEFAULT 0  COMMENT 'POST_LIKE',
    `POST_COMMENT_COUNT` int 			NOT NULL 	DEFAULT 0 ,
    `IS_SOVLED` 		 int 			NULL 		DEFAULT 0,
    `POST_CATEGORY`      VARCHAR(45)    NOT NULL   DEFAULT 'SNS' COMMENT 'POST_CATEGORY',
    `POST_DATE` DATE NOT NULL DEFAULT NOW(),
    PRIMARY KEY (POST_NUMBER)
);

ALTER TABLE POST
    ADD CONSTRAINT FK_POST_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;
       
CREATE TABLE POST_COMMENT
(
    `POST_NUMBER`      INT            NOT NULL    COMMENT 'POST_NUMBER', 
    `COMMENT_NUMBER`   INT            NOT NULL	DEFAULT 0  COMMENT 'COMMENT_NUMBER', 
    `COMMENT_CONTENT`  VARCHAR(45)    NOT NULL    COMMENT 'COMMENT_CONTENT', 
    `USER_ID`          VARCHAR(45)    NOT NULL    COMMENT 'USER_ID', 
    `COMMENT_DATE`     DATE           NOT NULL  DEFAULT NOW()  COMMENT 'COMMENT_DATE', 
    PRIMARY KEY (POST_NUMBER, COMMENT_NUMBER)
);

ALTER TABLE POST_COMMENT
    ADD CONSTRAINT FK_POST_COMMENT_USER_ID_USER_USER_ID FOREIGN KEY (USER_ID)
        REFERENCES USER (USER_ID) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE POST_COMMENT
    ADD CONSTRAINT FK_POST_COMMENT_POST_NUMBER_POST_POST_NUMBER FOREIGN KEY (POST_NUMBER)
        REFERENCES POST (POST_NUMBER) ON DELETE RESTRICT ON UPDATE RESTRICT;
  


CREATE TABLE TAG
(
    `TAG_NUMBER`  INT            NOT NULL    AUTO_INCREMENT COMMENT 'TAG_NUMBER', 
    `TAG_NAME`    VARCHAR(45)    NOT NULL    UNIQUE COMMENT 'TAG_NAME' , 
    PRIMARY KEY (TAG_NUMBER)
);

CREATE TABLE POST_TAG
(
    `POST_NUMBER`  INT    NOT NULL    COMMENT 'POST_NUMBER', 
    `TAG_NUMBER`   INT    NOT NULL    UNIQUE COMMENT 'TAG_NUMBER' 
);
ALTER TABLE POST_TAG
    ADD CONSTRAINT FK_POST_TAG_POST_NUMBER_POST_POST_NUMBER FOREIGN KEY (POST_NUMBER)
        REFERENCES POST (POST_NUMBER) ON DELETE RESTRICT ON UPDATE RESTRICT;

ALTER TABLE POST_TAG
    ADD CONSTRAINT FK_POST_TAG_TAG_NUMBER_TAG_TAG_NUMBER FOREIGN KEY (TAG_NUMBER)
        REFERENCES TAG (TAG_NUMBER) ON DELETE RESTRICT ON UPDATE RESTRICT;


  CREATE TABLE ALGO_CATEGORY
  (
  		`POST_NUMBER`   INT            NOT NULL    COMMENT 'POST_NUMBER',
  		`CATEGORY` VARCHAR(45)		NOT NULL,
  		PRIMARY KEY (POST_NUMBER, CATEGORY)
  )

ALTER TABLE ALGO_CATEGORY
    ADD CONSTRAINT FK_ALGO_CATEGORY_POST_NUMBER_POST_POST_NUMBER FOREIGN KEY (POST_NUMBER)
        REFERENCES POST (POST_NUMBER) ON DELETE RESTRICT ON UPDATE RESTRICT;

```

# SAMPLE DATA

```

```

